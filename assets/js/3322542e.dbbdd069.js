"use strict";(self.webpackChunkbeauty_docs=self.webpackChunkbeauty_docs||[]).push([[9261],{1251:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>c,toc:()=>o});const c=JSON.parse('{"id":"Advanced/caches","title":"Cache System","description":"Beauty Framework provides a fast, PSR-16 compliant cache abstraction layer with support for multiple backends and easy configuration via config/cache.php.","source":"@site/docs/3-Advanced/caches.md","sourceDirName":"3-Advanced","slug":"/Advanced/caches","permalink":"/docs/Advanced/caches","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Jobs System","permalink":"/docs/Advanced/jobs"},"next":{"title":"Local Process Management","permalink":"/docs/Advanced/processes"}}');var s=i(4848),r=i(8453);const a={sidebar_position:4},l="Cache System",d={},o=[{value:"\ud83e\uddf1 Basic Usage",id:"-basic-usage",level:2},{value:"\u2699\ufe0f Supported Drivers",id:"\ufe0f-supported-drivers",level:2},{value:"\ud83d\udee0 Configuration Loader",id:"-configuration-loader",level:2},{value:"\ud83d\udca1 Available Cache Methods",id:"-available-cache-methods",level:2},{value:"\ud83d\udd17 Repository",id:"-repository",level:2},{value:"\u2705 Summary",id:"-summary",level:2}];function t(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"cache-system",children:"Cache System"})}),"\n",(0,s.jsxs)(n.p,{children:["Beauty Framework provides a fast, PSR-16 compliant cache abstraction layer with support for multiple backends and easy configuration via ",(0,s.jsx)(n.code,{children:"config/cache.php"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"-basic-usage",children:"\ud83e\uddf1 Basic Usage"}),"\n",(0,s.jsxs)(n.p,{children:["Any service can use caching by injecting ",(0,s.jsx)(n.code,{children:"Psr\\SimpleCache\\CacheInterface"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"use Psr\\SimpleCache\\CacheInterface;\n\nclass UserService\n{\n    public function __construct(\n        private CacheInterface $cache,\n    ) {}\n\n    public function getData(): string\n    {\n        $data $this->cache->get('key');\n\n        if (!$data) {\n            $this->cache->set('key', 'value', 3600)\n        }\n\n        return $data ?? 'value';\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-supported-drivers",children:"\u2699\ufe0f Supported Drivers"}),"\n",(0,s.jsxs)(n.p,{children:["Caching behavior is configured in ",(0,s.jsx)(n.code,{children:"config/cache.php"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"return [\n    'default' => env('CACHE_DRIVER', 'redis'),\n\n    'stores' => [\n        'redis' => [...],\n        'roadrunner-kv' => [...],\n        'array' => [...],\n        'file' => [...],\n        'memory' => [...],\n    ],\n];\n"})}),"\n",(0,s.jsx)(n.p,{children:"Available drivers:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"redis"})," \u2014 via native Redis extension"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"roadrunner-kv"})," \u2014 integration with ",(0,s.jsx)(n.a,{href:"https://docs.roadrunner.dev/docs/key-value/overview-kv",children:"RoadRunner KV plugin"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"array"})," \u2014 in-memory array cache"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"file"})," \u2014 filesystem-based cache"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"memory"})," \u2014 LRU memory cache with configurable size"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\ud83d\udc49 See full configuration options and how to define custom drivers: ",(0,s.jsx)(n.a,{href:"/docs/Installation/Configs/cache",children:(0,s.jsx)(n.code,{children:"Configs/\u0421ache"})})]}),"\n",(0,s.jsx)(n.h2,{id:"-configuration-loader",children:"\ud83d\udee0 Configuration Loader"}),"\n",(0,s.jsx)(n.p,{children:"The configuration binding for the cache system is registered in:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"App\\Container\\Cache\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This class reads the settings from ",(0,s.jsx)(n.code,{children:"config/cache.php"})," and binds the proper cache implementation."]}),"\n",(0,s.jsx)(n.p,{children:"In addition, the container pre-binds the following for direct access:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"\\Redis::class"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"\\Spiral\\RoadRunner\\KeyValue\\Factory::class"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"You can use them in your services if you need lower-level access."}),"\n",(0,s.jsx)(n.h2,{id:"-available-cache-methods",children:"\ud83d\udca1 Available Cache Methods"}),"\n",(0,s.jsxs)(n.p,{children:["The following methods are supported from ",(0,s.jsx)(n.code,{children:"CacheInterface"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"get(string $key, mixed $default = null): mixed"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"set(string $key, mixed $value, null|int|DateInterval $ttl = null): bool"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"delete(string $key): bool"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"has(string $key): bool"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"clear(): bool"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"getMultiple(array $keys, mixed $default = null): iterable"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"setMultiple(iterable $values, null|int|DateInterval $ttl = null): bool"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"deleteMultiple(iterable $keys): bool"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"-repository",children:"\ud83d\udd17 Repository"}),"\n",(0,s.jsxs)(n.p,{children:["Cache are implemented in the ",(0,s.jsx)(n.code,{children:"beauty-framework/cache"})," package (already connected in the framework):"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://github.com/beauty-framework/cache",children:"https://github.com/beauty-framework/cache"})}),"\n",(0,s.jsx)(n.h2,{id:"-summary",children:"\u2705 Summary"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Use PSR-16 ",(0,s.jsx)(n.code,{children:"CacheInterface"})," for caching"]}),"\n",(0,s.jsxs)(n.li,{children:["Easily switch between drivers in ",(0,s.jsx)(n.code,{children:"config/cache.php"})]}),"\n",(0,s.jsx)(n.li,{children:"Redis is recommended for production"}),"\n",(0,s.jsx)(n.li,{children:"RoadRunner KV plugin is supported"}),"\n",(0,s.jsx)(n.li,{children:"Full support for TTLs, tags (if implemented), and multiple store backends"}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["For advanced usage and driver extension, check the configuration doc: ",(0,s.jsx)(n.a,{href:"/docs/Installation/Configs/cache",children:(0,s.jsx)(n.code,{children:"Configs/\u0421ache"})})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>l});var c=i(6540);const s={},r=c.createContext(s);function a(e){const n=c.useContext(r);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),c.createElement(r.Provider,{value:n},e.children)}}}]);