"use strict";(self.webpackChunkbeauty_docs=self.webpackChunkbeauty_docs||[]).push([[8142],{1665:(e,l,n)=>{n.r(l),n.d(l,{assets:()=>r,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"Components/Collection/index","title":"Collection","description":"This package provides powerful and extensible Collection, PaginatedCollection and LazyCollection implementations for the Beauty Framework. It offers a PHP-compliant, chainable, and efficient API for working with structured data.","source":"@site/docs/5-Components/1-Collection/index.md","sourceDirName":"5-Components/1-Collection","slug":"/Components/Collection/","permalink":"/docs/Components/Collection/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Components","permalink":"/docs/Components/"},"next":{"title":"Beauty Framework Roadmap","permalink":"/docs/Roadmap/"}}');var c=n(4848),s=n(8453);const a={},t="Collection",r={},o=[{value:"Installation",id:"installation",level:2},{value:"Overview",id:"overview",level:2},{value:"Storages",id:"storages",level:2},{value:"Usage",id:"usage",level:2},{value:"Creating a Collection",id:"creating-a-collection",level:3},{value:"Filtering and Mapping",id:"filtering-and-mapping",level:3},{value:"Sorting",id:"sorting",level:3},{value:"Getting First / Last Items",id:"getting-first--last-items",level:3},{value:"Lazy Collection",id:"lazy-collection",level:2},{value:"Available Methods",id:"available-methods",level:2},{value:"Common Operations",id:"common-operations",level:3},{value:"Accessors",id:"accessors",level:3},{value:"Interfaces",id:"interfaces",level:2},{value:"API",id:"api",level:2},{value:"Collection",id:"collection-1",level:3},{value:"Paginated Collection",id:"paginated-collection",level:3},{value:"LazyCollection",id:"lazycollection",level:3},{value:"Resources",id:"resources",level:2}];function d(e){const l={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.header,{children:(0,c.jsx)(l.h1,{id:"collection",children:"Collection"})}),"\n",(0,c.jsx)(l.p,{children:"This package provides powerful and extensible Collection, PaginatedCollection and LazyCollection implementations for the Beauty Framework. It offers a PHP-compliant, chainable, and efficient API for working with structured data."}),"\n",(0,c.jsxs)(l.blockquote,{children:["\n",(0,c.jsxs)(l.p,{children:["\u26a0\ufe0f This is an ",(0,c.jsx)(l.strong,{children:"optional module"}),". You need to install and configure it manually."]}),"\n"]}),"\n",(0,c.jsx)(l.hr,{}),"\n",(0,c.jsx)(l.h2,{id:"installation",children:"Installation"}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-bash",children:"composer require beauty-framework/collection\n"})}),"\n",(0,c.jsx)(l.hr,{}),"\n",(0,c.jsx)(l.h2,{id:"overview",children:"Overview"}),"\n",(0,c.jsxs)(l.ul,{children:["\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"Collection"})," \u2014 eager evaluation, array-like behavior."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"LazyCollection"})," \u2014 lazy evaluation using generators."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"PaginatedCollection"})," - default ",(0,c.jsx)(l.code,{children:"Collection"})," with paginator"]}),"\n",(0,c.jsx)(l.li,{children:"Separate interfaces for operations, accessors, and lazy behavior."}),"\n",(0,c.jsxs)(l.li,{children:["Built-in support for alternative storages (",(0,c.jsx)(l.code,{children:"Array"}),", ",(0,c.jsx)(l.code,{children:"Ds\\Map"}),")."]}),"\n"]}),"\n",(0,c.jsx)(l.hr,{}),"\n",(0,c.jsx)(l.h2,{id:"storages",children:"Storages"}),"\n",(0,c.jsxs)(l.p,{children:["By default collection use ",(0,c.jsx)(l.code,{children:"ArrayStorage"}),", but if you install ",(0,c.jsx)(l.code,{children:"ds"})," extension, collection has use ",(0,c.jsx)(l.code,{children:"DsMapStorage"}),". In framework Dockerfile this extension is already included."]}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-bash",children:"pecl install ds\n"})}),"\n",(0,c.jsx)(l.hr,{}),"\n",(0,c.jsx)(l.h2,{id:"usage",children:"Usage"}),"\n",(0,c.jsx)(l.h3,{id:"creating-a-collection",children:"Creating a Collection"}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-php",children:"use Beauty\\Collection\\Collection;\n\n$collection = new Collection([\n    ['name' => 'Kirill'],\n    ['name' => 'Hui'],\n    ['name' => 'Zver'],\n]);\n"})}),"\n",(0,c.jsx)(l.h3,{id:"filtering-and-mapping",children:"Filtering and Mapping"}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-php",children:"$result = $collection\n    ->where('name', 'Kirill')\n    ->map(fn($item) => strtoupper($item['name']))\n    ->toArray();\n"})}),"\n",(0,c.jsx)(l.h3,{id:"sorting",children:"Sorting"}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-php",children:"$sorted = $collection->sortBy('name');\n"})}),"\n",(0,c.jsx)(l.h3,{id:"getting-first--last-items",children:"Getting First / Last Items"}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-php",children:"$first = $collection->first();\n$last = $collection->last();\n"})}),"\n",(0,c.jsx)(l.hr,{}),"\n",(0,c.jsx)(l.h2,{id:"lazy-collection",children:"Lazy Collection"}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-php",children:"use Beauty\\Collection\\LazyCollection;\n\n$lazy = new LazyCollection(fn() => yield from range(1, 1000000));\n\n$result = $lazy\n    ->filter(fn($x) => $x % 2 === 0)\n    ->take(10)\n    ->flatMap(fn($x) => [$x, $x * 10])\n    ->toArray();\n"})}),"\n",(0,c.jsx)(l.hr,{}),"\n",(0,c.jsx)(l.h2,{id:"available-methods",children:"Available Methods"}),"\n",(0,c.jsx)(l.h3,{id:"common-operations",children:"Common Operations"}),"\n",(0,c.jsxs)(l.ul,{children:["\n",(0,c.jsx)(l.li,{children:(0,c.jsx)(l.code,{children:"map(callable)"})}),"\n",(0,c.jsx)(l.li,{children:(0,c.jsx)(l.code,{children:"filter(callable)"})}),"\n",(0,c.jsx)(l.li,{children:(0,c.jsx)(l.code,{children:"each(callable)"})}),"\n",(0,c.jsx)(l.li,{children:(0,c.jsx)(l.code,{children:"where(string $field, mixed $value)"})}),"\n",(0,c.jsx)(l.li,{children:(0,c.jsx)(l.code,{children:"sortBy(string $field)"})}),"\n",(0,c.jsx)(l.li,{children:(0,c.jsx)(l.code,{children:"chunk(int $size)"})}),"\n",(0,c.jsx)(l.li,{children:(0,c.jsx)(l.code,{children:"reduce(callable, $initial)"})}),"\n",(0,c.jsx)(l.li,{children:(0,c.jsx)(l.code,{children:"flatMap(callable)"})}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"paginate(int $perPage)"})," ",(0,c.jsx)(l.em,{children:"(PaginatedCollection only)"})]}),"\n"]}),"\n",(0,c.jsx)(l.h3,{id:"accessors",children:"Accessors"}),"\n",(0,c.jsxs)(l.ul,{children:["\n",(0,c.jsx)(l.li,{children:(0,c.jsx)(l.code,{children:"first()"})}),"\n",(0,c.jsx)(l.li,{children:(0,c.jsx)(l.code,{children:"last()"})}),"\n",(0,c.jsx)(l.li,{children:(0,c.jsx)(l.code,{children:"toArray()"})}),"\n",(0,c.jsx)(l.li,{children:(0,c.jsx)(l.code,{children:"count()"})}),"\n"]}),"\n",(0,c.jsx)(l.hr,{}),"\n",(0,c.jsx)(l.h2,{id:"interfaces",children:"Interfaces"}),"\n",(0,c.jsxs)(l.ul,{children:["\n",(0,c.jsx)(l.li,{children:(0,c.jsx)(l.code,{children:"CollectionInterface"})}),"\n",(0,c.jsx)(l.li,{children:(0,c.jsx)(l.code,{children:"PaginatedCollectionInterface"})}),"\n",(0,c.jsx)(l.li,{children:(0,c.jsx)(l.code,{children:"SupportsOperations"})}),"\n",(0,c.jsx)(l.li,{children:(0,c.jsx)(l.code,{children:"SupportsAccessors"})}),"\n",(0,c.jsx)(l.li,{children:(0,c.jsx)(l.code,{children:"LazyCollectionInterface"})}),"\n"]}),"\n",(0,c.jsx)(l.hr,{}),"\n",(0,c.jsx)(l.h2,{id:"api",children:"API"}),"\n",(0,c.jsx)(l.h3,{id:"collection-1",children:"Collection"}),"\n",(0,c.jsxs)(l.ul,{children:["\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"map(callable $callback): static"}),"\nTransform each value using the callback."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"each(callable $callback): static"}),"\nRun a callback over each item (no transform)."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"filter(?callable $callback = null): static"}),"\nKeep only items that pass the callback (or truthy if null)."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"where(string $field, mixed $value): static"}),"\nFilter items where a field/property equals the given value."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"sortBy(string|callable $callback, string $direction = 'asc'): static"}),"\nSort by a field or callback."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"values(): static"}),"\nRe-index the collection numerically."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"first(): mixed"}),"\nGet the first item in the collection."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"last(): mixed"}),"\nGet the last item in the collection."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"get(mixed $key, mixed $default = null): mixed"}),"\nRetrieve a value by key with optional default."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"put(mixed $key, mixed $value): void"}),"\nStore a value by key."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"has(mixed $key): bool"}),"\nDetermine if a key exists."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"remove(mixed $key): void"}),"\nRemove a value by key."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"toArray(): array"}),"\nConvert the collection to a plain array."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"IteratorAggregate::getIterator()"}),"\nRequired to support ",(0,c.jsx)(l.code,{children:"foreach"})," loops."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"ArrayAccess"}),"\nEnables ",(0,c.jsx)(l.code,{children:"$collection[$key]"})," syntax."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"Countable::count()"}),"\nEnables ",(0,c.jsx)(l.code,{children:"count($collection)"}),"."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"JsonSerializable::jsonSerialize()"}),"\nEnables ",(0,c.jsx)(l.code,{children:"json_encode($collection)"}),"."]}),"\n"]}),"\n",(0,c.jsx)(l.h3,{id:"paginated-collection",children:"Paginated Collection"}),"\n",(0,c.jsxs)(l.p,{children:["like a ",(0,c.jsx)(l.code,{children:"Collection"}),", but with method ",(0,c.jsx)(l.code,{children:"paginate(int $perPage, int $page = 1)"})]}),"\n",(0,c.jsx)(l.h3,{id:"lazycollection",children:"LazyCollection"}),"\n",(0,c.jsxs)(l.ul,{children:["\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"map(callable $callback): static"}),"\nLazily transform each value using the callback."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"filter(?callable $callback = null): static"}),"\nLazily filter values using the callback (or truthy if null)."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"take(int $limit): static"}),"\nTake the first N elements from the collection."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"chunk(int $size): static"}),"\nBreak the collection into chunks of the given size."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"reduce(callable $callback, mixed $initial = null): mixed"}),"\nAggregate values down to a single result."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"flatMap(callable $callback): static"}),"\nFlatten and transform each item using the callback."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"first(): mixed"}),"\nGet the first item in the lazy collection."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"toArray(): array"}),"\nConvert the lazy collection to a plain array."]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"IteratorAggregate::getIterator()"}),"\nRequired to support ",(0,c.jsx)(l.code,{children:"foreach"})," loops."]}),"\n"]}),"\n",(0,c.jsx)(l.hr,{}),"\n",(0,c.jsx)(l.h2,{id:"resources",children:"Resources"}),"\n",(0,c.jsxs)(l.ul,{children:["\n",(0,c.jsxs)(l.li,{children:["This package repo: ",(0,c.jsx)(l.a,{href:"https://github.com/beauty-framework/collection",children:"https://github.com/beauty-framework/collection"})]}),"\n"]}),"\n",(0,c.jsx)(l.hr,{})]})}function h(e={}){const{wrapper:l}={...(0,s.R)(),...e.components};return l?(0,c.jsx)(l,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}},8453:(e,l,n)=>{n.d(l,{R:()=>a,x:()=>t});var i=n(6540);const c={},s=i.createContext(c);function a(e){const l=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(l):{...l,...e}}),[l,e])}function t(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:a(e.components),i.createElement(s.Provider,{value:l},e.children)}}}]);