"use strict";(self.webpackChunkbeauty_docs=self.webpackChunkbeauty_docs||[]).push([[5302],{4e3:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>p,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"Installation/install","title":"Installation","description":"Beauty Framework can be installed either via Docker (recommended) or manually using Composer and RoadRunner.","source":"@site/docs/1-Installation/install.md","sourceDirName":"1-Installation","slug":"/Installation/install","permalink":"/docs/Installation/install","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Introduction","permalink":"/docs/intro"},"next":{"title":"xDebug & PhpStorm (Docker)","permalink":"/docs/Installation/xdebug"}}');var t=r(4848),o=r(8453);const l={sidebar_position:1},i="Installation",a={},d=[{value:"\ud83d\ude80 Recommended: Docker Setup",id:"-recommended-docker-setup",level:2},{value:"1. Create a new project:",id:"1-create-a-new-project",level:3},{value:"2. Copy the environment file:",id:"2-copy-the-environment-file",level:3},{value:"3. Set your database name:",id:"3-set-your-database-name",level:3},{value:"4. Edit Docker settings:",id:"4-edit-docker-settings",level:3},{value:"5. Start the services:",id:"5-start-the-services",level:3},{value:"\ud83d\udee0 Manual Installation",id:"-manual-installation",level:2},{value:"1. Install dependencies:",id:"1-install-dependencies",level:3},{value:"2. Get the RoadRunner binary:",id:"2-get-the-roadrunner-binary",level:3},{value:"3. Start the RoadRunner server:",id:"3-start-the-roadrunner-server",level:3},{value:"\u2705 Requirements",id:"-requirements",level:2}];function c(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components},{Details:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"installation",children:"Installation"})}),"\n",(0,t.jsx)(n.p,{children:"Beauty Framework can be installed either via Docker (recommended) or manually using Composer and RoadRunner."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-recommended-docker-setup",children:"\ud83d\ude80 Recommended: Docker Setup"}),"\n",(0,t.jsx)(n.h3,{id:"1-create-a-new-project",children:"1. Create a new project:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"composer create-project beauty-framework/app my-service\ncd my-service\n"})}),"\n",(0,t.jsx)(n.h3,{id:"2-copy-the-environment-file",children:"2. Copy the environment file:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cp .env.example .env\n"})}),"\n",(0,t.jsx)(n.h3,{id:"3-set-your-database-name",children:"3. Set your database name:"}),"\n",(0,t.jsxs)(n.p,{children:["In the ",(0,t.jsx)(n.code,{children:".env"})," file, set the ",(0,t.jsx)(n.code,{children:"DB_DATABASE"})," value:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dotenv",children:"DB_DATABASE=my_service\n"})}),"\n",(0,t.jsx)(n.h3,{id:"4-edit-docker-settings",children:"4. Edit Docker settings:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["In ",(0,t.jsx)(n.code,{children:"docker-compose.yml"}),", update the network name:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"networks:\n  default:\n    name: your-custom-network-name\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Update container name prefixes (e.g., ",(0,t.jsx)(n.code,{children:"bf-app"}),", ",(0,t.jsx)(n.code,{children:"bf-redis"}),") to your own project prefix."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"5-start-the-services",children:"5. Start the services:"}),"\n",(0,t.jsx)(n.p,{children:"The Docker setup includes everything you need to get started:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"PHP with RoadRunner"}),"\n",(0,t.jsx)(n.li,{children:"Redis"}),"\n",(0,t.jsxs)(n.li,{children:["PostgreSQL (with default credentials from ",(0,t.jsx)(n.code,{children:".env"}),")"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"To launch the environment, run:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"make up\n"})}),"\n",(0,t.jsx)(n.p,{children:"This will bring up the full environment with PHP, Redis, RoadRunner and all required services."}),"\n",(0,t.jsxs)(n.p,{children:["Dockerfile is located in ",(0,t.jsx)(n.code,{children:".docker/php/Dockerfile"}),"."]}),"\n",(0,t.jsxs)(r,{children:[(0,t.jsx)("summary",{children:"Docker"}),(0,t.jsxs)(r,{children:[(0,t.jsx)("summary",{children:(0,t.jsx)(n.strong,{children:"Dockerfile:"})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dockerfile",children:'FROM ghcr.io/roadrunner-server/roadrunner:2024 AS roadrunner\n\nFROM php:8.4-alpine AS base\n\nARG WWWUSER=1000\nARG WWWGROUP=1000\n\nRUN --mount=type=bind,from=mlocati/php-extension-installer:2,source=/usr/bin/install-php-extensions,target=/usr/local/bin/install-php-extensions \\\napk add --no-cache libtool autoconf g++ make protobuf-dev protobuf unzip curl \\\n&& install-php-extensions \\\n  @composer-2 \\\n  opcache \\\n  zip \\\n  bcmath \\\n  sockets \\\n  pcntl \\\n  pdo \\\n  pdo_mysql \\\n  pdo_pgsql \\\n  pdo_sqlite \\\n  amqp \\\n  redis \\\n  msgpack \\\n  grpc \\\n  intl \\\n&& curl -LO https://github.com/protocolbuffers/protobuf/releases/download/v24.4/protoc-24.4-linux-x86_64.zip \\\n&& unzip protoc-24.4-linux-x86_64.zip -d /usr/local \\\n&& rm protoc-24.4-linux-x86_64.zip\n\nCOPY --from=roadrunner /usr/bin/rr /usr/local/bin/rr\n\nWORKDIR /var/www\n\nENV COMPOSER_ALLOW_SUPERUSER=1\n\nCOPY ./composer.json ./composer.lock ./\nRUN composer install --no-dev --optimize-autoloader || true\n\nCOPY .docker/php/php.ini /usr/local/etc/php/conf.d/custom.ini\n\nRUN addgroup -g ${WWWGROUP} appuser \\\n&& adduser -u ${WWWUSER} -G appuser -s /bin/sh -D appuser\n\nFROM base AS prod\n\nCOPY . .\n\nUSER appuser\n\nEXPOSE 8080\n\nCMD ["rr", "serve", "-c", ".rr.yaml"]\n\nFROM base AS dev\n\nRUN apk add --no-cache --virtual .build-deps $PHPIZE_DEPS \\\n&& pecl install xdebug \\\n&& docker-php-ext-enable xdebug \\\n&& echo "xdebug.mode=debug" >> /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini \\\n&& echo "xdebug.client_host=host.docker.internal" >> /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini \\\n&& echo "xdebug.start_with_request=trigger" >> /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini \\\n&& echo "xdebug.idekey=PHPSTORM" >> /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini \\\n&& echo "xdebug.client_port=9003" >> /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini \\\n&& apk del .build-deps\n\nUSER appuser\n\nEXPOSE 8080 9003\n\nCMD ["rr", "serve", "-c", ".rr.yaml"]\n'})})]}),(0,t.jsxs)(r,{children:[(0,t.jsx)("summary",{children:(0,t.jsx)(n.strong,{children:"docker-compose.yml"})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yml",children:'services:\n app:\n   build:\n     context: .\n     dockerfile: .docker/php/Dockerfile\n     target: prod\n   restart: always\n   container_name: grpc-br-app\n   working_dir: /var/www\n   ports:\n     - "8080:8080"\n     - "51015:51015"\n   volumes:\n     - .:/var/www:cached\n     - ./protoc-gen-php-grpc:/usr/local/bin/protoc-gen-php-grpc\n   depends_on:\n     - db\n     - redis\n   networks:\n     - example-grpc-beauty-network\n\n db:\n   image: postgres:16-alpine\n   container_name: grpc-br-postgres\n   restart: always\n   environment:\n     POSTGRES_DB: ${DB_DATABASE}\n     POSTGRES_USER: ${DB_USERNAME}\n     POSTGRES_PASSWORD: ${DB_PASSWORD}\n   volumes:\n     - pg_data:/var/lib/postgresql/data\n   networks:\n     - example-grpc-beauty-network\n\n redis:\n   image: redis:alpine\n   container_name: grpc-br-redis\n   restart: always\n   volumes:\n     - redis_data:/data\n   networks:\n     - example-grpc-beauty-network\n\nvolumes:\n pg_data:\n redis_data:\n\nnetworks:\n example-grpc-beauty-network:\n   driver: bridge\n'})})]}),(0,t.jsxs)(r,{children:[(0,t.jsx)("summary",{children:(0,t.jsx)(n.strong,{children:"docker-compose.override.yml"})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yml",children:'services:\n  app:\n    build:\n      target: dev\n    environment:\n      PHP_IDE_CONFIG: "serverName=stage"\n    restart: unless-stopped\n    #ports:\n    #    - "9003:9003"\n\n  db:\n    restart: unless-stopped\n    ports:\n      - "5432:5432"\n\n  redis:\n    restart: unless-stopped\n    ports:\n      - "6379:6379"\n'})})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-manual-installation",children:"\ud83d\udee0 Manual Installation"}),"\n",(0,t.jsx)(n.p,{children:"If you prefer not to use Docker:"}),"\n",(0,t.jsx)(n.h3,{id:"1-install-dependencies",children:"1. Install dependencies:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"composer install\n"})}),"\n",(0,t.jsx)(n.h3,{id:"2-get-the-roadrunner-binary",children:"2. Get the RoadRunner binary:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./vendor/bin/rr get-binary\n"})}),"\n",(0,t.jsx)(n.h3,{id:"3-start-the-roadrunner-server",children:"3. Start the RoadRunner server:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./rr serve\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-requirements",children:"\u2705 Requirements"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["PHP ",(0,t.jsx)(n.strong,{children:"8.1+"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Extensions:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"ext-redis"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"ext-protobuf"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Composer"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"RoadRunner"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"For the best developer experience, Docker is highly recommended."}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.p,{children:"Once installed, you\u2019re ready to explore routing, controllers, middleware, jobs, and everything Beauty has to offer."})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>i});var s=r(6540);const t={},o=s.createContext(t);function l(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);